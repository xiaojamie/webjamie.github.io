var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, copyDefault, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== "default"))
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toCommonJS = /* @__PURE__ */ ((cache) => {
  return (module2, temp) => {
    return cache && cache.get(module2) || (temp = __reExport(__markAsModule({}), module2, 1), cache && cache.set(module2, temp), temp);
  };
})(typeof WeakMap !== "undefined" ? /* @__PURE__ */ new WeakMap() : 0);
var codefence_exports = {};
__export(codefence_exports, {
  default: () => codefence
});
function codefence(parser) {
  const start = parser.index;
  const open = parser.match_regex(/[`~]{3,}/);
  parser.index += open.length;
  let raw = open + "";
  while (parser.index < parser.template.length && !parser.match(open)) {
    raw += parser.template[parser.index++];
  }
  parser.eat(open, true);
  raw += open;
  const trailingWhitespace = parser.read_until(/\S/);
  const { metadata, data } = extractCodeFence(raw);
  const node = {
    start,
    end: parser.index,
    type: "CodeFence",
    raw: `${raw}` + trailingWhitespace,
    metadata,
    data
  };
  parser.current().children.push(node);
}
function extractCodeFence(str) {
  const [_, leadingLine] = str.match(/(^[^\n]*\r?\n)/m) ?? ["", ""];
  const metadata = leadingLine.trim();
  const data = str.slice(leadingLine.length);
  return { metadata, data };
}
module.exports = __toCommonJS(codefence_exports);
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL3BhcnNlL3N0YXRlL2NvZGVmZW5jZS50cyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdlLG1CQUFtQixRQUFnQjtBQUNqRCxRQUFNLFFBQVEsT0FBTztBQUNyQixRQUFNLE9BQU8sT0FBTyxZQUFZLFVBQVU7QUFDMUMsU0FBTyxTQUFTLEtBQU07QUFFdEIsTUFBSSxNQUFNLE9BQU87QUFFakIsU0FBTyxPQUFPLFFBQVEsT0FBTyxTQUFTLFVBQVUsQ0FBQyxPQUFPLE1BQU0sSUFBSSxHQUFHO0FBQ3BFLFdBQU8sT0FBTyxTQUFTLE9BQU87QUFBQSxFQUMvQjtBQUVBLFNBQU8sSUFBSSxNQUFNLElBQUk7QUFDckIsU0FBTztBQUNQLFFBQU0scUJBQXFCLE9BQU8sV0FBVyxJQUFJO0FBQ2pELFFBQU0sRUFBRSxVQUFVLFNBQVMsaUJBQWlCLEdBQUc7QUFFL0MsUUFBTSxPQUFPO0FBQUEsSUFDWjtBQUFBLElBQ0EsS0FBSyxPQUFPO0FBQUEsSUFDWixNQUFNO0FBQUEsSUFDTixLQUFLLEdBQUcsUUFBUTtBQUFBLElBQ2hCO0FBQUEsSUFDQTtBQUFBLEVBQ0Q7QUFFQSxTQUFPLFFBQVEsRUFBRSxTQUFTLEtBQUssSUFBSTtBQUNwQztBQUdBLDBCQUEwQixLQUFhO0FBQ3RDLFFBQU0sQ0FBQyxHQUFHLGVBQWUsSUFBSSxNQUFNLGlCQUFpQixLQUFLLENBQUMsSUFBSSxFQUFFO0FBQ2hFLFFBQU0sV0FBVyxZQUFZLEtBQUs7QUFDbEMsUUFBTSxPQUFPLElBQUksTUFBTSxZQUFZLE1BQU07QUFDekMsU0FBTyxFQUFFLFVBQVUsS0FBSztBQUN6QjsiLAogICJuYW1lcyI6IFtdCn0K
