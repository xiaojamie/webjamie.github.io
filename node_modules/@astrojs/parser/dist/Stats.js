var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, copyDefault, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== "default"))
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toCommonJS = /* @__PURE__ */ ((cache) => {
  return (module2, temp) => {
    return cache && cache.get(module2) || (temp = __reExport(__markAsModule({}), module2, 1), cache && cache.set(module2, temp), temp);
  };
})(typeof WeakMap !== "undefined" ? /* @__PURE__ */ new WeakMap() : 0);
var Stats_exports = {};
__export(Stats_exports, {
  default: () => Stats
});
const now = typeof process !== "undefined" && process.hrtime ? () => {
  const t = process.hrtime();
  return t[0] * 1e3 + t[1] / 1e6;
} : () => self.performance.now();
function collapse_timings(timings) {
  const result = {};
  timings.forEach((timing) => {
    result[timing.label] = Object.assign({
      total: timing.end - timing.start
    }, timing.children && collapse_timings(timing.children));
  });
  return result;
}
class Stats {
  constructor() {
    this.start_time = now();
    this.stack = [];
    this.current_children = this.timings = [];
  }
  start(label) {
    const timing = {
      label,
      start: now(),
      end: null,
      children: []
    };
    this.current_children.push(timing);
    this.stack.push(timing);
    this.current_timing = timing;
    this.current_children = timing.children;
  }
  stop(label) {
    if (label !== this.current_timing.label) {
      throw new Error(`Mismatched timing labels (expected ${this.current_timing.label}, got ${label})`);
    }
    this.current_timing.end = now();
    this.stack.pop();
    this.current_timing = this.stack[this.stack.length - 1];
    this.current_children = this.current_timing ? this.current_timing.children : this.timings;
  }
  render() {
    const timings = Object.assign({
      total: now() - this.start_time
    }, collapse_timings(this.timings));
    return {
      timings
    };
  }
}
module.exports = __toCommonJS(Stats_exports);
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL1N0YXRzLnRzIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUEsTUFBTSxNQUNMLE9BQU8sWUFBWSxlQUFlLFFBQVEsU0FDdkMsTUFBTTtBQUNOLFFBQU0sSUFBSSxRQUFRLE9BQU87QUFDekIsU0FBTyxFQUFFLEtBQUssTUFBTSxFQUFFLEtBQUs7QUFDM0IsSUFDQSxNQUFNLEtBQUssWUFBWSxJQUFJO0FBVS9CLDBCQUEwQixTQUFTO0FBQ2xDLFFBQU0sU0FBUyxDQUFDO0FBQ2hCLFVBQVEsUUFBUSxDQUFDLFdBQVc7QUFDM0IsV0FBTyxPQUFPLFNBQVMsT0FBTyxPQUM3QjtBQUFBLE1BQ0MsT0FBTyxPQUFPLE1BQU0sT0FBTztBQUFBLElBQzVCLEdBQ0EsT0FBTyxZQUFZLGlCQUFpQixPQUFPLFFBQVEsQ0FDcEQ7QUFBQSxFQUNELENBQUM7QUFDRCxTQUFPO0FBQ1I7QUFFQSxNQUFPLE1BQW9CO0FBQUEsRUFPMUIsY0FBYztBQUNiLFNBQUssYUFBYSxJQUFJO0FBQ3RCLFNBQUssUUFBUSxDQUFDO0FBQ2QsU0FBSyxtQkFBbUIsS0FBSyxVQUFVLENBQUM7QUFBQSxFQUN6QztBQUFBLEVBRUEsTUFBTSxPQUFPO0FBQ1osVUFBTSxTQUFTO0FBQUEsTUFDZDtBQUFBLE1BQ0EsT0FBTyxJQUFJO0FBQUEsTUFDWCxLQUFLO0FBQUEsTUFDTCxVQUFVLENBQUM7QUFBQSxJQUNaO0FBRUEsU0FBSyxpQkFBaUIsS0FBSyxNQUFNO0FBQ2pDLFNBQUssTUFBTSxLQUFLLE1BQU07QUFFdEIsU0FBSyxpQkFBaUI7QUFDdEIsU0FBSyxtQkFBbUIsT0FBTztBQUFBLEVBQ2hDO0FBQUEsRUFFQSxLQUFLLE9BQU87QUFDWCxRQUFJLFVBQVUsS0FBSyxlQUFlLE9BQU87QUFDeEMsWUFBTSxJQUFJLE1BQU0sc0NBQXNDLEtBQUssZUFBZSxjQUFjLFFBQVE7QUFBQSxJQUNqRztBQUVBLFNBQUssZUFBZSxNQUFNLElBQUk7QUFDOUIsU0FBSyxNQUFNLElBQUk7QUFDZixTQUFLLGlCQUFpQixLQUFLLE1BQU0sS0FBSyxNQUFNLFNBQVM7QUFDckQsU0FBSyxtQkFBbUIsS0FBSyxpQkFBaUIsS0FBSyxlQUFlLFdBQVcsS0FBSztBQUFBLEVBQ25GO0FBQUEsRUFFQSxTQUFTO0FBQ1IsVUFBTSxVQUFVLE9BQU8sT0FDdEI7QUFBQSxNQUNDLE9BQU8sSUFBSSxJQUFJLEtBQUs7QUFBQSxJQUNyQixHQUNBLGlCQUFpQixLQUFLLE9BQU8sQ0FDOUI7QUFFQSxXQUFPO0FBQUEsTUFDTjtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0Q7IiwKICAibmFtZXMiOiBbXQp9Cg==
